
var __cov_jRr9If$ECT3Jkqa_U6V6ig = (Function('return this'))();
if (!__cov_jRr9If$ECT3Jkqa_U6V6ig.__coverage__) { __cov_jRr9If$ECT3Jkqa_U6V6ig.__coverage__ = {}; }
__cov_jRr9If$ECT3Jkqa_U6V6ig = __cov_jRr9If$ECT3Jkqa_U6V6ig.__coverage__;
if (!(__cov_jRr9If$ECT3Jkqa_U6V6ig['src/middleware/InjectAccountId.js'])) {
   __cov_jRr9If$ECT3Jkqa_U6V6ig['src/middleware/InjectAccountId.js'] = {"path":"src/middleware/InjectAccountId.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":22},"end":{"line":4,"column":50}}},"2":{"name":"(anonymous_2)","line":28,"loc":{"start":{"line":28,"column":47},"end":{"line":28,"column":69}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":51}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":41}},"3":{"start":{"line":4,"column":0},"end":{"line":41,"column":2}},"4":{"start":{"line":7,"column":4},"end":{"line":11,"column":5}},"5":{"start":{"line":8,"column":8},"end":{"line":8,"column":25}},"6":{"start":{"line":9,"column":8},"end":{"line":9,"column":75}},"7":{"start":{"line":10,"column":8},"end":{"line":10,"column":15}},"8":{"start":{"line":13,"column":4},"end":{"line":15,"column":14}},"9":{"start":{"line":17,"column":4},"end":{"line":17,"column":41}},"10":{"start":{"line":18,"column":4},"end":{"line":18,"column":31}},"11":{"start":{"line":20,"column":4},"end":{"line":24,"column":5}},"12":{"start":{"line":21,"column":8},"end":{"line":21,"column":25}},"13":{"start":{"line":22,"column":8},"end":{"line":22,"column":73}},"14":{"start":{"line":23,"column":8},"end":{"line":23,"column":15}},"15":{"start":{"line":26,"column":4},"end":{"line":26,"column":21}},"16":{"start":{"line":28,"column":4},"end":{"line":40,"column":7}},"17":{"start":{"line":29,"column":8},"end":{"line":33,"column":9}},"18":{"start":{"line":30,"column":12},"end":{"line":30,"column":29}},"19":{"start":{"line":31,"column":12},"end":{"line":31,"column":66}},"20":{"start":{"line":32,"column":12},"end":{"line":32,"column":19}},"21":{"start":{"line":35,"column":8},"end":{"line":37,"column":10}},"22":{"start":{"line":39,"column":8},"end":{"line":39,"column":22}},"23":{"start":{"line":43,"column":0},"end":{"line":43,"column":33}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":4},"end":{"line":7,"column":4}},{"start":{"line":7,"column":4},"end":{"line":7,"column":4}}]},"2":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":20,"column":4}},{"start":{"line":20,"column":4},"end":{"line":20,"column":4}}]},"3":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":29,"column":8}},{"start":{"line":29,"column":8},"end":{"line":29,"column":8}}]}}};
}
__cov_jRr9If$ECT3Jkqa_U6V6ig = __cov_jRr9If$ECT3Jkqa_U6V6ig['src/middleware/InjectAccountId.js'];
__cov_jRr9If$ECT3Jkqa_U6V6ig.s['1']++;var theAccountsDao=require('../dao/AccountsDao');__cov_jRr9If$ECT3Jkqa_U6V6ig.s['2']++;var theMessages=require('../Messages');__cov_jRr9If$ECT3Jkqa_U6V6ig.s['3']++;var InjectAccountId=function(pReq,pRes,next){'use strict';__cov_jRr9If$ECT3Jkqa_U6V6ig.f['1']++;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['4']++;if(!pReq.headers.authorization){__cov_jRr9If$ECT3Jkqa_U6V6ig.b['1'][0]++;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['5']++;pRes.status(400);__cov_jRr9If$ECT3Jkqa_U6V6ig.s['6']++;pRes.send(theMessages.error('Bearer token not found in request!'));__cov_jRr9If$ECT3Jkqa_U6V6ig.s['7']++;return;}else{__cov_jRr9If$ECT3Jkqa_U6V6ig.b['1'][1]++;}__cov_jRr9If$ECT3Jkqa_U6V6ig.s['8']++;var headers,split,token;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['9']++;headers=pReq.headers.authorization;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['10']++;split=headers.split(' ');__cov_jRr9If$ECT3Jkqa_U6V6ig.s['11']++;if(split.length<=1){__cov_jRr9If$ECT3Jkqa_U6V6ig.b['2'][0]++;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['12']++;pRes.status(400);__cov_jRr9If$ECT3Jkqa_U6V6ig.s['13']++;pRes.send(theMessages.error('Bearer token has invalid format!'));__cov_jRr9If$ECT3Jkqa_U6V6ig.s['14']++;return;}else{__cov_jRr9If$ECT3Jkqa_U6V6ig.b['2'][1]++;}__cov_jRr9If$ECT3Jkqa_U6V6ig.s['15']++;token=split[1];__cov_jRr9If$ECT3Jkqa_U6V6ig.s['16']++;theAccountsDao.getAccountIdViaToken(token,function(pAccountId){__cov_jRr9If$ECT3Jkqa_U6V6ig.f['2']++;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['17']++;if(pAccountId.error){__cov_jRr9If$ECT3Jkqa_U6V6ig.b['3'][0]++;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['18']++;pRes.status(400);__cov_jRr9If$ECT3Jkqa_U6V6ig.s['19']++;pRes.send(theMessages.error('Invalid Bearer Token!'));__cov_jRr9If$ECT3Jkqa_U6V6ig.s['20']++;return;}else{__cov_jRr9If$ECT3Jkqa_U6V6ig.b['3'][1]++;}__cov_jRr9If$ECT3Jkqa_U6V6ig.s['21']++;pReq.user={accountId:pAccountId.id};__cov_jRr9If$ECT3Jkqa_U6V6ig.s['22']++;return next();});};__cov_jRr9If$ECT3Jkqa_U6V6ig.s['23']++;module.exports=InjectAccountId;
