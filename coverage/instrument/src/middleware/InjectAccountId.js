
var __cov_jRr9If$ECT3Jkqa_U6V6ig = (Function('return this'))();
if (!__cov_jRr9If$ECT3Jkqa_U6V6ig.__coverage__) { __cov_jRr9If$ECT3Jkqa_U6V6ig.__coverage__ = {}; }
__cov_jRr9If$ECT3Jkqa_U6V6ig = __cov_jRr9If$ECT3Jkqa_U6V6ig.__coverage__;
if (!(__cov_jRr9If$ECT3Jkqa_U6V6ig['src/middleware/InjectAccountId.js'])) {
   __cov_jRr9If$ECT3Jkqa_U6V6ig['src/middleware/InjectAccountId.js'] = {"path":"src/middleware/InjectAccountId.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":22},"end":{"line":4,"column":50}}},"2":{"name":"(anonymous_2)","line":26,"loc":{"start":{"line":26,"column":47},"end":{"line":26,"column":69}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":51}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":38}},"3":{"start":{"line":4,"column":0},"end":{"line":34,"column":2}},"4":{"start":{"line":7,"column":4},"end":{"line":10,"column":5}},"5":{"start":{"line":8,"column":8},"end":{"line":8,"column":56}},"6":{"start":{"line":9,"column":8},"end":{"line":9,"column":15}},"7":{"start":{"line":12,"column":4},"end":{"line":14,"column":14}},"8":{"start":{"line":16,"column":4},"end":{"line":16,"column":41}},"9":{"start":{"line":17,"column":4},"end":{"line":17,"column":31}},"10":{"start":{"line":19,"column":4},"end":{"line":22,"column":5}},"11":{"start":{"line":20,"column":8},"end":{"line":20,"column":54}},"12":{"start":{"line":21,"column":8},"end":{"line":21,"column":15}},"13":{"start":{"line":24,"column":4},"end":{"line":24,"column":21}},"14":{"start":{"line":26,"column":4},"end":{"line":33,"column":7}},"15":{"start":{"line":27,"column":8},"end":{"line":32,"column":9}},"16":{"start":{"line":28,"column":12},"end":{"line":30,"column":14}},"17":{"start":{"line":31,"column":12},"end":{"line":31,"column":26}},"18":{"start":{"line":36,"column":0},"end":{"line":36,"column":33}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":4},"end":{"line":7,"column":4}},{"start":{"line":7,"column":4},"end":{"line":7,"column":4}}]},"2":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":4}},{"start":{"line":19,"column":4},"end":{"line":19,"column":4}}]},"3":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":27,"column":8}},{"start":{"line":27,"column":8},"end":{"line":27,"column":8}}]}}};
}
__cov_jRr9If$ECT3Jkqa_U6V6ig = __cov_jRr9If$ECT3Jkqa_U6V6ig['src/middleware/InjectAccountId.js'];
__cov_jRr9If$ECT3Jkqa_U6V6ig.s['1']++;var theAccountsDao=require('../dao/AccountsDao');__cov_jRr9If$ECT3Jkqa_U6V6ig.s['2']++;var Messages=require('../Messages');__cov_jRr9If$ECT3Jkqa_U6V6ig.s['3']++;var InjectAccountId=function(pReq,pRes,next){'use strict';__cov_jRr9If$ECT3Jkqa_U6V6ig.f['1']++;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['4']++;if(!pReq.headers.authorization){__cov_jRr9If$ECT3Jkqa_U6V6ig.b['1'][0]++;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['5']++;pRes.send('Bearer token not found in request!');__cov_jRr9If$ECT3Jkqa_U6V6ig.s['6']++;return;}else{__cov_jRr9If$ECT3Jkqa_U6V6ig.b['1'][1]++;}__cov_jRr9If$ECT3Jkqa_U6V6ig.s['7']++;var headers,split,token;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['8']++;headers=pReq.headers.authorization;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['9']++;split=headers.split(' ');__cov_jRr9If$ECT3Jkqa_U6V6ig.s['10']++;if(split.length<=1){__cov_jRr9If$ECT3Jkqa_U6V6ig.b['2'][0]++;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['11']++;pRes.send('Bearer token has invalid format!');__cov_jRr9If$ECT3Jkqa_U6V6ig.s['12']++;return;}else{__cov_jRr9If$ECT3Jkqa_U6V6ig.b['2'][1]++;}__cov_jRr9If$ECT3Jkqa_U6V6ig.s['13']++;token=split[1];__cov_jRr9If$ECT3Jkqa_U6V6ig.s['14']++;theAccountsDao.getAccountIdViaToken(token,function(pAccountId){__cov_jRr9If$ECT3Jkqa_U6V6ig.f['2']++;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['15']++;if(pAccountId.error){__cov_jRr9If$ECT3Jkqa_U6V6ig.b['3'][0]++;__cov_jRr9If$ECT3Jkqa_U6V6ig.s['16']++;pReq.user={accountId:pAccountId.id};__cov_jRr9If$ECT3Jkqa_U6V6ig.s['17']++;return next();}else{__cov_jRr9If$ECT3Jkqa_U6V6ig.b['3'][1]++;}});};__cov_jRr9If$ECT3Jkqa_U6V6ig.s['18']++;module.exports=InjectAccountId;
