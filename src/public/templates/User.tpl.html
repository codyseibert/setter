<div class="st--header">
    <section class="row">
        <div class="header">
            <button class="[ btn--secondary  btn--medium ] mb3 icon-left-big display--block"
                    ng-show="lastPageWasGym() || lastPageWasRoute() || lastPageWasSetters()"
                    ng-click="back()" >
               Back
            </button>

            <div class="flag  mb2">
                <div class="flag-image"
                     ng-click="getAccountId() === userId && uploadImage()">
                    <img class="avatar--big"
                         ng-src="{{getUserImageSrc(image)}}">
                </div>

                <div class="flag-body">
                    <h1 class="mb0  fwb"
                        ng-show="getAccountId() === userId">
                        {{user.firstname}} {{user.lastname}}
                    </h1>

                    <h1 class="mb0  fwb"
                        ng-hide="getAccountId() === userId">
                        {{user.firstname}} {{user.lastname}}
                    </h1>

                    <h2 class="h4  icon-home "
                        ng-click="navigateToGym(user.gym_id)">
                        {{user.gym_name}}
                    </h2>
                </div>
            </div>
        </div>
    </section>
</div>



<section class="row">
    <div class="small-12 columns">
        <tabset>
            <tab select="hideSendsCharts()">
                <tab-heading>
                    <i class="icon-globe"> </i> Activity
                </tab-heading>

                <content>
                    <div class="row">
                        <div class="small-12  columns  mb4">
                            <h2>
                                Latest Sends
                            </h2>
                            <div class="row small-collapse">
                                <ul class="list list--tableStyle">
                                    <li class="list-elem"
                                        ng-repeat="act in activity">
                                        <span ng-click="navigateToRoute(act.gym_id, act.wall_id, act.route_id)">
                                            <i class="icon-circle icon--big"
                                               ng-style="{color: act.value}"> </i>
                                               {{formatGrade(act.bg, act.rg)}} on {{act.date}}
                                        </span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </content>
            </tab>

            <tab select="showSendsCharts()">
                <tab-heading>
                    <i class="icon-stats"> </i> Statistics
                </tab-heading>


                <!--
                    SECTION - User's Grades
                -->
                <content>
                    <section class="row">
                        <ng-include
                            ng-controller="BoulderGradeController"
                            src=" 'templates/user/BoulderGrade.tpl.html' ">
                        </ng-include>


                        <ng-include
                            ng-controller="TopRopeGradeController"
                            src=" 'templates/user/TopRopeGrade.tpl.html' ">
                        </ng-include>


                        <ng-include
                            ng-controller="LeadGradeController"
                            src=" 'templates/user/LeadGrade.tpl.html' ">
                        </ng-include>
                    </section>
                </content>


            </tab>
        </tabset>
    </div>
</section>



<section id="charts"
         class="row"
         style="position: absolute; top: -44px; left: -9999px;">

    <ng-include
        ng-controller="BoulderSendsGraphController"
        src=" 'templates/user/BoulderingSendsGraph.tpl.html' ">
    </ng-include>

    <ng-include
        ng-controller="TopRopeSendsGraphController"
        src=" 'templates/user/TopRopeSendsGraph.tpl.html' ">
    </ng-include>

    <ng-include
        ng-controller="LeadSendsGraphController"
        src=" 'templates/user/LeadSendsGraph.tpl.html' ">
    </ng-include>


    <!--
    Hide the progress charts for now until they are even useful
    <div class="medium-6 small-12 columns ng-hide">
        <h2>
            Progress
        </h2>

        <canvas class="chart-line"
            ng-show="hasRopeSends"
            data="ropeSendsLineGraph.data"
            labels="ropeSendsLineGraph.labels"
            options="ropeSendsLineGraph.options"
            legend="true"
            width="100%"
            height="100%">
        </canvas>

        <span ng-show="!hasRopeSends">
            <h3 class="text-center fwb  mb2">
                No rope sends, yet.
            </h3>

            <h4 class="h6  text-center"
                ng-show="getAccountId() === userId">
                <br><a ng-click="navigateToGyms()">Set a home gym</a>,
                and track your progress by marking routes as "sent".
            </h4>
        </span>
    </div>


    <div class="small-12 medium-6 columns ng-hide">
        <h2>
            Progress
        </h2>

        <canvas class="chart-line"
                ng-show="hasBoulderSends"
                data="boulderSendsLineGraph.data"
                labels="boulderSendsLineGraph.labels"
                options="boulderSendsLineGraph.options"
                legend="true"
                width="100%"
                height="100%">
        </canvas>

        <span ng-show="!hasBoulderSends">
            <h3 class="text-center fwb  mb2">
                No bouldering sends, yet.
            </h3>

            <h4 class="h6  text-center"
                ng-show="getAccountId() === userId">
                <br><a ng-click="navigateToGyms()">Set a home gym</a>,
                and track your progress by marking routes as "sent".
            </h4>
        </span>
    </div>
-->
</section>




<!-- hidden -->
<form id="image_form"
    style="display: none;"
    enctype="multipart/form-data"
    action="{{'/api/accounts/image'}}"
    method="post"
    ng-upload="complete(content)">
    <input id="image_file"
        type="file"
        name="file" />
    <input id="image_submit"
        type="submit"></input>
    <input name="authorization"
        value="{{authorization}}"></input>
</form>
